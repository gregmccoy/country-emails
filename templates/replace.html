{% extends "base.html" %}


{% block content %}
<div class="container">
<script>
    $(document).ready(function() {
      $("#replace-save").click(function() {

        $.ajax({
            url: '/replace/',
            type: 'POST',
            data: $("#links_item_form").serialize(),
            success: function(result) {
              $("#replace_item_form").submit();
            }
        });
      });
      $(".replace-delete").click(function() {
        index = $(this).attr("data-loop-index");
        $("#replace-text-old-" + index).parent().parent().addClass("hidden");
        $("#replace-text-old-" + index).val("*DEL");
        $("#replace-text-new-" + index).val("*DEL");
      });
    });
</script>
<table class="table table-striped">
  <tr>
    <th>Old</th>
    <th>New</th>
    <th></th>
  </tr>
  <form id="links_item_form" action="/replace/" method="POST">
    <h2>Links</h2>
    <input type="hidden" name="type" value="links">
    {% for list in data.links %}
    <tr>
      <td>
        <input type="text" name="{{ loop.index}}-old" id="replace-text-old-{{ loop.index }}" value="{{ list.0 }}" style="width: 100%;"/>
      </td>
      <td>
        <input type="text" name="{{ loop.index }}-new" id="replace-text-new-{{ loop.index }}" value="{{ list.1 }}" style="width: 100%;"/>
      </td>
      <td>
        <input type="button" data-loop-index="{{ loop.index }}" id="delete-btn-{{ loop.index }}" class="replace-delete btn btn-danger" value="Delete">
      </td>
    </tr>
    {% endfor %}
  </form>
</table>

<table class="table table-striped">
  <tr>
    <th>Old</th>
    <th>New</th>
    <th></th>
  </tr>
  <form id="replace_item_form" action="/replace/" method="POST">
    <h2>Word List</h2>
    <input type="hidden" name="type" value="replace">
    {% for list in data.replace %}
    <tr>
      <td>
        <input type="text" name="{{ loop.index}}-old" id="replace-text-old-{{ loop.index }}" value="{{ list.0 }}" style="width: 100%;"/>
      </td>
      <td>
        <input type="text" name="{{ loop.index }}-new" id="replace-text-new-{{ loop.index }}" value="{{ list.1 }}" style="width: 100%;"/>
      </td>
      <td>
        <input type="button" data-loop-index="{{ loop.index }}" id="delete-btn-{{ loop.index }}" class="replace-delete btn btn-danger" value="Delete">
      </td>
    </tr>
    {% endfor %}
  </form>
</table>
</div>
<div style="position: fixed; height: 50px; bottom: 0; width: 100%;">
  <div class="pull-right" style="background: #DDDDDD; margin-right: 10px; margin-bottom: 20px; padding: 10px 10px 10px 10px;">
    <input type="button" id="replace-save" class="btn btn-info" style="font-size: 15px; width: 100px;" value="Save">
  </div>
</div>
{% endblock %}
